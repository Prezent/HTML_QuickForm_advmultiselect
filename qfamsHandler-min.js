if(typeof QFAMS==="undefined"||!QFAMS){var QFAMS={}}QFAMS.updateCounter=function(c,v){var i;var nodeText=null;if(c!==null){if(c.childNodes){for(i=0;i<c.childNodes.length;i++){c.removeChild(c.childNodes[i])}}nodeText=document.createTextNode(v);c.appendChild(nodeText)}};QFAMS.updateLiveCounter=function(){var lbl=this.parentNode;var selectedCount=0;var div=lbl.parentNode;var inputs=div.getElementsByTagName('input');for(var i=0;i<inputs.length;i++){if(inputs[i].checked==1){selectedCount++}}var e=div.id;var qfamsName=e.substring(e.indexOf('_',0)+1,e.length);var span=document.getElementById(qfamsName+'_selected');QFAMS.updateCounter(span,selectedCount+'/'+inputs.length)};QFAMS.editSelection=function(qfamsName,selectMode){if(selectMode!==0&&selectMode!==1&&selectMode!==2){return}var selectedCount=0;var ams=document.getElementById('qfams_'+qfamsName);var inputs=ams.getElementsByTagName('input');for(var i=0;i<inputs.length;i++){if(selectMode===2){if(inputs[i].checked==0){inputs[i].checked=1}else if(inputs[i].checked==1){inputs[i].checked=0}}else{inputs[i].checked=selectMode}if(inputs[i].checked==1){selectedCount++}}var span=document.getElementById(qfamsName+'_selected');QFAMS.updateCounter(span,selectedCount+'/'+inputs.length)};QFAMS.moveSelection=function(qfamsName,selectLeft,selectRight,selectHidden,action,arrange){var source=null;var target=null;var option;var c=null;var s=null;var i;if(action==='add'||action==='all'||action==='toggle'){source=selectLeft;target=selectRight}else{source=selectRight;target=selectLeft}if(source.selectedIndex===-1&&(action==='add'||action==='remove')){return}if(target.length>0&&target.options[0].value===""){target.removeAttribute("disabled");target.options[0]=null}var maxTo=target.length;for(i=0;i<source.length;i++){if(action==='all'||action==='none'||action==='toggle'||source.options[i].selected===true){if(source.options[i].disabled===false){option=new Option(source.options[i].text,source.options[i].value);s=QFAMS.getStyles(source.options[i]);for(c=0;c<s.length;c++){option.style.setProperty(s[c][0],s[c][1],s[c][2])}target.options[target.length]=option}}}for(i=(source.length-1);i>=0;i--){if(action==='all'||action==='none'||action==='toggle'||source.options[i].selected===true){if(source.options[i].disabled===false){source.options[i]=null}}}if(action==='toggle'){for(i=0;i<maxTo;i++){if(target.options[i].disabled===false){option=new Option(target.options[i].text,target.options[i].value);s=QFAMS.getStyles(target.options[i]);for(c=0;c<s.length;c++){option.style.setProperty(s[c][0],s[c][1],s[c][2])}source.options[source.length]=option}}for(i=(maxTo-1);i>=0;i--){if(target.options[i].disabled===false){target.options[i]=null}}}c=document.getElementById(qfamsName+'_unselected');s=document.getElementById(qfamsName+'-f');QFAMS.updateCounter(c,s.length);c=document.getElementById(qfamsName+'_selected');s=document.getElementById(qfamsName+'-t');QFAMS.updateCounter(c,s.length);if(arrange!=='none'){QFAMS.sortList(target,QFAMS.compareText,arrange)}QFAMS.updateHidden(selectHidden,selectRight)};QFAMS.sortList=function(list,compareFunction,arrange){var i;var options=new Array(list.options.length);for(i=0;i<options.length;i++){options[i]=new Option(list.options[i].text,list.options[i].value,list.options[i].defaultSelected,list.options[i].selected)}options.sort(compareFunction);if(arrange==='desc'){options.reverse()}list.options.length=0;for(i=0;i<options.length;i++){list.options[i]=options[i]}};QFAMS.compareText=function(option1,option2){if(option1.text===option2.text){return 0}return option1.text<option2.text?-1:1};QFAMS.updateHidden=function(h,r){var i;for(i=0;i<h.length;i++){h.options[i].selected=false}for(i=0;i<r.length;i++){h.options[h.length]=new Option(r.options[i].text,r.options[i].value);h.options[h.length-1].selected=true}};QFAMS.moveUp=function(l,h){var indice=l.selectedIndex;if(indice<0){return}if(indice>0){QFAMS.moveSwap(l,indice,indice-1);QFAMS.updateHidden(h,l)}};QFAMS.moveDown=function(l,h){var indice=l.selectedIndex;if(indice<0){return}if(indice<l.options.length-1){QFAMS.moveSwap(l,indice,indice+1);QFAMS.updateHidden(h,l)}};QFAMS.moveTop=function(l,h){var indice=l.selectedIndex;if(indice<0){return}while(indice>0){QFAMS.moveSwap(l,indice,indice-1);QFAMS.updateHidden(h,l);indice--}};QFAMS.moveBottom=function(l,h){var indice=l.selectedIndex;if(indice<0){return}while(indice<l.options.length-1){QFAMS.moveSwap(l,indice,indice+1);QFAMS.updateHidden(h,l);indice++}};QFAMS.moveSwap=function(l,i,j){var n,p,s,option;var sProperties=[],tProperties=[];var propertyName,propertyValue,propertyPrior;var valeur=l.options[i].value;var texte=l.options[i].text;var nosel=l.options[i].disabled;sProperties=QFAMS.getStyles(l.options[i]);tProperties=QFAMS.getStyles(l.options[j]);if(sProperties.length>0){for(p=0;p<sProperties.length;p++){propertyName=sProperties[p][0];propertyValue=sProperties[p][1];propertyPrior=sProperties[p][2];option=l.options[j];option.style.setProperty(propertyName,propertyValue,propertyPrior);s=false;for(n=0;n<tProperties.length;n++){if(tProperties[n][0]===propertyName){s=true;break}}if(s===false){option=l.options[i];option.style.removeProperty(propertyName)}else{propertyName=tProperties[n][0];propertyValue=tProperties[n][1];propertyPrior=tProperties[n][2];option=l.options[i];option.style.setProperty(propertyName,propertyValue,propertyPrior);tProperties[n]=['','','']}}}for(p=0;p<tProperties.length;p++){propertyName=tProperties[p][0];propertyValue=tProperties[p][1];propertyPrior=tProperties[p][2];option=l.options[i];option.style.setProperty(propertyName,propertyValue,propertyPrior);option=l.options[j];option.style.removeProperty(propertyName)}l.options[i].value=l.options[j].value;l.options[i].text=l.options[j].text;l.options[i].disabled=l.options[j].disabled;l.options[j].value=valeur;l.options[j].text=texte;l.options[j].disabled=nosel;l.selectedIndex=j};QFAMS.getStyles=function(e){var eAttr=e.style;var propertyName,propertyValue,propertyPrior;var n,p,properties=[];n=eAttr.length;for(p=0;p<n;p++){propertyName=eAttr.item(p);propertyValue=eAttr.getPropertyValue(propertyName);propertyPrior=eAttr.getPropertyPriority(propertyName);properties[p]=[propertyName,propertyValue,propertyPrior]}return properties};QFAMS.init=function(elm){var e,i;for(e=0;e<elm.length;e++){var div=document.getElementById('qfams_'+elm[e]);if(div!==null){var inputs=div.getElementsByTagName('input');if(inputs!==null){for(i=0;i<inputs.length;i++){inputs[i].onclick=QFAMS.updateLiveCounter}}}}};